<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="AR-–≤—ñ–∑–∏—Ç–∫–∞-–ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ">
    <title>üé®Smart Lessa AR-–≤—ñ–∑–∏—Ç–∫–∞</title>

    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

    <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
        a-scene { width: 100% !important; height: 100% !important; position: fixed; top: 0; left: 0; }
        .arjs-loader {
            height: 100%; width: 100%; position: absolute; top: 0; left: 0;
            background: rgba(135, 206, 235, 0.9); z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #FF4500; font-size: 1.8em; text-align: center; padding: 20px; box-sizing: border-box;
            font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        .pulse { animation: pulse 1.5s infinite; }

        /* –°—Ç–∏–ª—ñ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .controls {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            z-index: 10000; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;
            max-width: 90%;
        }
        .control-btn {
            background-color: rgba(255, 255, 255, 0.8); border: 2px solid #ddd;
            border-radius: 10px; padding: 8px 15px; cursor: pointer;
            font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
            font-size: 1em; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-decoration: none; color: #333;
        }
        .control-btn img { height: 24px; vertical-align: middle; margin-right: 8px; }
        .control-btn:hover { background-color: rgba(255, 255, 255, 1); }
        .control-btn.disabled { opacity: 0.5; pointer-events: none; }

        /* –°—Ç–∏–ª—ñ –¥–ª—è –≤—ñ–∫—Ç–æ—Ä–∏–Ω–∏ */
        .quiz-container {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 10001; background: rgba(255, 255, 255, 0.95);
            border-radius: 15px; padding: 25px; max-width: 90%; text-align: center;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2); font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
            display: none;
        }
        .quiz-question { font-size: 1.5em; margin-bottom: 20px; color: #333; }
        .quiz-options button {
            display: block; width: 100%; padding: 12px; margin-bottom: 10px;
            border: 2px solid #4CAF50; border-radius: 10px;
            background-color: #f0f0f0; cursor: pointer; font-size: 1.1em;
            transition: background-color 0.3s;
        }
        .quiz-options button:hover { background-color: #e0e0e0; }
        .quiz-options button.correct { background-color: #4CAF50; color: white; border-color: #4CAF50; }
        .quiz-options button.incorrect { background-color: #f44336; color: white; border-color: #f44336; }
        .quiz-result { margin-top: 20px; font-size: 1.3em; font-weight: bold; }
    </style>
</head>
<body>
    <div class="arjs-loader" id="loader">
        <div class="pulse">‚ú® Smart Lessa AR-–≤—ñ–∑–∏—Ç–∫–∞ ‚ú®</div>
        <div style="margin-top: 20px; font-size: 1.2em;">–ù–∞–≤–µ–¥—ñ—Ç—å –∫–∞–º–µ—Ä—É –Ω–∞ –≤—ñ–∑–∏—Ç–∫—É! üòä</div>
    </div>

    <div id="quiz-container" class="quiz-container">
        <div class="quiz-question" id="quiz-question"></div>
        <div class="quiz-options" id="quiz-options"></div>
        <div class="quiz-result" id="quiz-result"></div>
    </div>

    <a-scene
        mindar-image="imageTargetSrc: ./targets/mycard.mind;"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        loading-screen="enabled: false"
        embedded
        renderer="colorManagement: true; physicallyCorrectLights: true;"
    >
        <a-assets>
            <img id="photo-texture" src="./assets/images/photo.jpg">
            <video id="lesa-video" src="./assets/video/lesa.mp4" preload="auto" loop="false"></video>
            
            <img id="youtube-icon" src="./assets/icons/youtube.png">
            <img id="telegram-icon" src="./assets/icons/telegram.png">
            <img id="googlesites-icon" src="./assets/icons/googlesites.png">
            <img id="instagram-icon" src="./assets/icons/instagram.png">
            <img id="play-icon" src="./assets/icons/play.png">
            <img id="goy-icon" src="./assets/icons/goy.png">
        </a-assets>

        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

        <a-entity mindar-image-target="targetIndex: 0">
            <a-image src="#photo-texture" position="0 0 -0.1" height="1.0" width="0.75"></a-image>

            <a-plane id="youtube-link" class="link-btn" width="0.2" height="0.2" position="0.5 -0.5 0" rotation="0 0 0" material="src: #youtube-icon; transparent: true; opacity: 1;"></a-plane>
            <a-plane id="telegram-link" class="link-btn" width="0.2" height="0.2" position="0.2 -0.5 0" rotation="0 0 0" material="src: #telegram-icon; transparent: true; opacity: 1;"></a-plane>
            <a-plane id="google-link" class="link-btn" width="0.2" height="0.2" position="-0.1 -0.5 0" rotation="0 0 0" material="src: #googlesites-icon; transparent: true; opacity: 1;"></a-plane>
            <a-plane id="instagram-link" class="link-btn" width="0.2" height="0.2" position="-0.4 -0.5 0" rotation="0 0 0" material="src: #instagram-icon; transparent: true; opacity: 1;"></a-plane>
            <a-plane id="play-video-btn" class="video-btn" width="0.2" height="0.2" position="-0.7 -0.5 0" rotation="0 0 0" material="src: #play-icon; transparent: true; opacity: 1;"></a-plane>
            <a-plane id="quiz-btn" class="quiz-btn" width="0.2" height="0.2" position="-1.0 -0.5 0" rotation="0 0 0" material="src: #goy-icon; transparent: true; opacity: 1;"></a-plane>
            
            <a-video id="ar-video" src="#lesa-video" position="0.8 0 0" width="1.6" height="0.9" visible="false"></a-video>
        </a-entity>
    </a-scene>

    <div class="controls">
        <button id="youtube-btn" class="control-btn"><img src="./assets/icons/youtube.png" alt="YouTube">YouTube</button>
        <button id="telegram-btn" class="control-btn"><img src="./assets/icons/telegram.png" alt="Telegram">Telegram</button>
        <button id="google-btn" class="control-btn"><img src="./assets/icons/googlesites.png" alt="Google Sites">Google Site</button>
        <button id="instagram-btn" class="control-btn"><img src="./assets/icons/instagram.png" alt="Instagram">Instagram</button>
        <button id="play-video-html-btn" class="control-btn"><img src="./assets/icons/play.png" alt="Play">Play Video</button>
        <button id="quiz-start-btn" class="control-btn"><img src="./assets/icons/goy.png" alt="Quiz">Quiz</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const loader = document.getElementById('loader');
            const targetEntity = document.querySelector('[mindar-image-target]');

            // –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ 3D-–µ–ª–µ–º–µ–Ω—Ç–∏ —Å—Ü–µ–Ω–∏
            const arVideoEl = document.getElementById('ar-video');
            const videoAsset = document.getElementById('lesa-video');
            const playVideoBtn = document.getElementById('play-video-btn');
            const quizBtn = document.getElementById('quiz-btn');

            // –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ HTML-–µ–ª–µ–º–µ–Ω—Ç–∏
            const quizContainer = document.getElementById('quiz-container');
            const quizStartBtn = document.getElementById('quiz-start-btn');
            const quizQuestionEl = document.getElementById('quiz-question');
            const quizOptionsEl = document.getElementById('quiz-options');
            const quizResultEl = document.getElementById('quiz-result');

            let isQuizActive = false;
            let currentQuestionIndex = 0;
            const quizData = [
                {
                    question: "–Ø–∫–µ –º—ñ—Å—Ç–æ —î —Å—Ç–æ–ª–∏—Ü–µ—é –£–∫—Ä–∞—ó–Ω–∏?",
                    options: ["–õ—å–≤—ñ–≤", "–û–¥–µ—Å–∞", "–ö–∏—ó–≤", "–•–∞—Ä–∫—ñ–≤"],
                    answer: "–ö–∏—ó–≤"
                },
                {
                    question: "–Ø–∫ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –≥–æ–ª–æ–≤–Ω–∞ —Ä—ñ—á–∫–∞ –£–∫—Ä–∞—ó–Ω–∏?",
                    options: ["–î–Ω—ñ—Å—Ç–µ—Ä", "–î–Ω—ñ–ø—Ä–æ", "–î–µ—Å–Ω–∞", "–î—É–Ω–∞–π"],
                    answer: "–î–Ω—ñ–ø—Ä–æ"
                }
            ];

            function startQuiz() {
                isQuizActive = true;
                currentQuestionIndex = 0;
                quizContainer.style.display = 'block';
                showQuestion();
            }

            function showQuestion() {
                const currentQuestion = quizData[currentQuestionIndex];
                quizQuestionEl.textContent = currentQuestion.question;
                quizOptionsEl.innerHTML = '';
                quizResultEl.textContent = '';
                currentQuestion.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.addEventListener('click', () => checkAnswer(option));
                    quizOptionsEl.appendChild(button);
                });
            }

            function checkAnswer(selectedOption) {
                const currentQuestion = quizData[currentQuestionIndex];
                const isCorrect = selectedOption === currentQuestion.answer;
                
                // –í—ñ–∑—É–∞–ª—å–Ω–∞ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è
                Array.from(quizOptionsEl.children).forEach(button => {
                    button.disabled = true;
                    if (button.textContent === currentQuestion.answer) {
                        button.classList.add('correct');
                    } else if (button.textContent === selectedOption) {
                        button.classList.add('incorrect');
                    }
                });

                if (isCorrect) {
                    quizResultEl.textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ';
                    setTimeout(() => {
                        currentQuestionIndex++;
                        if (currentQuestionIndex < quizData.length) {
                            showQuestion();
                        } else {
                            quizResultEl.textContent = '–í—ñ–∫—Ç–æ—Ä–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ú–æ–ª–æ–¥–µ—Ü—å! üèÜ';
                            setTimeout(() => {
                                quizContainer.style.display = 'none';
                                isQuizActive = false;
                            }, 2000);
                        }
                    }, 1500);
                } else {
                    quizResultEl.textContent = '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑. ‚ùå';
                    setTimeout(() => {
                        quizResultEl.textContent = '';
                        Array.from(quizOptionsEl.children).forEach(button => {
                            button.disabled = false;
                            button.classList.remove('correct', 'incorrect');
                        });
                    }, 1500);
                }
            }
            
            // –õ–æ–≥—ñ–∫–∞ –¥–ª—è AR-–∫–Ω–æ–ø–æ–∫
            const arVideo = document.getElementById('ar-video');
            const arVideoBtn = document.getElementById('play-video-btn');
            arVideoBtn.addEventListener('click', () => {
                arVideo.setAttribute('visible', 'true');
                arVideo.play();
            });

            const arQuizBtn = document.getElementById('quiz-btn');
            arQuizBtn.addEventListener('click', () => {
                startQuiz();
            });

            // –û–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è HTML-–∫–Ω–æ–ø–æ–∫
            document.getElementById('youtube-btn').addEventListener('click', () => { window.open('https://www.youtube.com/@23SmartLessa32', '_blank'); });
            document.getElementById('telegram-btn').addEventListener('click', () => { window.open('https://t.me/+Ck0ua_cmlI84Yjcy', '_blank'); });
            document.getElementById('google-btn').addEventListener('click', () => { window.open('https://sites.google.com/view/questaria/%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BD%D0%B0', '_blank'); });
            document.getElementById('instagram-btn').addEventListener('click', () => { window.open('https://www.instagram.com/smart23lessa?igsh=aHN5dzZudnJneW85', '_blank'); });
            document.getElementById('play-video-html-btn').addEventListener('click', () => {
                if (arVideo.components && arVideo.components.material) {
                    arVideo.setAttribute('visible', 'true');
                    arVideo.play();
                } else {
                    alert('–í—ñ–¥–µ–æ –Ω–µ –≥–æ—Ç–æ–≤–µ –¥–æ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.');
                }
            });
            document.getElementById('quiz-start-btn').addEventListener('click', startQuiz);

            // –õ–æ–≥—ñ–∫–∞ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞
            if (targetEntity) {
                targetEntity.addEventListener('targetFound', () => {
                    console.log("üéØ –ú–∞—Ä–∫–µ—Ä –∑–Ω–∞–π–¥–µ–Ω–æ!");
                    loader.style.display = 'none';
                });
                targetEntity.addEventListener('targetLost', () => {
                    console.log("‚ÑπÔ∏è –ú–∞—Ä–∫–µ—Ä –≤—Ç—Ä–∞—á–µ–Ω–æ.");
                    loader.style.display = 'flex';
                    // –ó—É–ø–∏–Ω—è—î–º–æ –≤—ñ–¥–µ–æ, —è–∫—â–æ –º–∞—Ä–∫–µ—Ä –≤—Ç—Ä–∞—á–µ–Ω–æ
                    arVideo.pause();
                    arVideo.currentTime = 0;
                    arVideo.setAttribute('visible', 'false');
                });
            } else {
                console.error('–ï–ª–µ–º–µ–Ω—Ç mindar-image-target –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!');
            }
        });
    </script>
</body>
</html>
